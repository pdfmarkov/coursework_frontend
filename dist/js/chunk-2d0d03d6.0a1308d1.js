(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d03d6"],{"66aa":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("a4d3"),a("e01a");var s=a("7a23"),n={class:"container"},c={key:0,class:"alert alert-danger",role:"alert"},r={key:1,class:"alert alert-danger",role:"alert",style:{margin:"1em"}},o={class:"container rounded bg-white mt-5 mb-5"},i={class:"row"},l={class:"col-md-5 border-right"},d={class:"p-3 py-5"},b=Object(s["f"])("div",{class:"d-flex justify-content-between align-items-center mb-3"},[Object(s["f"])("h4",{class:"text-right"},"My Profile")],-1),u={class:"row mt-2"},f={class:"col-md-6"},m={key:0,class:"font-weight-normal"},j={class:"row mt-2"},g={class:"col-md-6"},O=Object(s["f"])("label",{class:"labels"},"Name",-1),h={class:"col-md-6"},p=Object(s["f"])("label",{class:"labels"},"Surname",-1),v={class:"row mt-3"},y={class:"col-md-6"},D=Object(s["g"])("Birth date: "),k=Object(s["f"])("p",null,null,-1),w=Object(s["f"])("p",null,null,-1),N={class:"row mt-1"},x={class:"col-md-6"},U=Object(s["f"])("label",null,"Description",-1),S={class:"mt-5 text-center"},G={class:"form-group"},T=["disabled"],C={class:"spinner-border spinner-border-sm"},_=Object(s["f"])("span",null,"Add user info",-1),M={class:"col-md-5"},F={class:"p-3 py-5"},P=Object(s["f"])("div",{class:"d-flex justify-content-between align-items-center mb-3"},[Object(s["f"])("h4",{class:"text-right"},"My Tags")],-1),E={class:""},I={class:"form-group"},A={key:0,class:""},J=Object(s["f"])("label",null,[Object(s["f"])("p"),Object(s["g"])("Added tags:")],-1),B=Object(s["f"])("label",null,[Object(s["f"])("p"),Object(s["g"])("Add some new tags:"),Object(s["f"])("p")],-1),L=["onClick"],W=Object(s["f"])("div",{class:"d-flex justify-content-between align-items-center mb-3"},[Object(s["f"])("h4",{class:"text-right"},"My Projects")],-1),R={class:"card-body"},$={class:"card-title"},K={class:"card-text"},Y={class:"card-text"},q={key:0,class:"card-footer text-white"},z={class:"card-footer text-muted"};function H(e,t,a,H,Q,V){var X=Object(s["D"])("Field"),Z=Object(s["D"])("ErrorMessage"),ee=Object(s["D"])("Form");return Object(s["v"])(),Object(s["e"])("div",n,[Q.message?(Object(s["v"])(),Object(s["e"])("div",c,Object(s["G"])(Q.message),1)):Object(s["d"])("",!0),null!=Q.content?(Object(s["v"])(),Object(s["e"])("div",r,Object(s["G"])(Q.content),1)):Object(s["d"])("",!0),Object(s["h"])(ee,{onSubmit:V.addUserInfo,"validation-schema":Q.schema},{default:Object(s["O"])((function(){return[Object(s["f"])("div",o,[Object(s["f"])("div",i,[Object(s["f"])("div",l,[Object(s["f"])("div",d,[b,Object(s["f"])("div",u,[Object(s["f"])("div",f,[null!=Q.info?(Object(s["v"])(),Object(s["e"])("span",m,"User: "+Object(s["G"])(Q.info.username),1)):Object(s["d"])("",!0)])]),Object(s["f"])("div",j,[Object(s["f"])("div",g,[O,Object(s["h"])(X,{name:"name",type:"text",class:"form-control",placeholder:V.getName()},null,8,["placeholder"]),Object(s["h"])(Z,{name:"name",class:"error-feedback"})]),Object(s["f"])("div",h,[p,Object(s["h"])(X,{name:"surname",type:"text",class:"form-control",placeholder:V.getSurname()},null,8,["placeholder"]),Object(s["h"])(Z,{name:"surname",class:"error-feedback"})])]),Object(s["f"])("div",v,[Object(s["f"])("div",y,[Object(s["f"])("span",null,[D,k,Object(s["g"])(Object(s["G"])(V.getBirthDate()),1),w]),Object(s["h"])(X,{name:"birthDate",type:"datetime-local",class:"form-control",placeholder:V.getBirthDate()},null,8,["placeholder"]),Object(s["h"])(Z,{name:"birthDate",class:"error-feedback"})])]),Object(s["f"])("div",N,[Object(s["f"])("div",x,[U,Object(s["h"])(X,{name:"description",as:"textarea",type:"text",class:"form-control",placeholder:V.getDescription()},null,8,["placeholder"]),Object(s["h"])(Z,{name:"description",class:"error-feedback"})])]),Object(s["f"])("div",S,[Object(s["f"])("div",G,[Object(s["f"])("button",{class:"btn btn-primary btn-block",disabled:Q.loading},[Object(s["P"])(Object(s["f"])("span",C,null,512),[[s["K"],Q.loading]]),_],8,T)])])])]),Object(s["f"])("div",M,[Object(s["f"])("div",F,[P,Object(s["f"])("div",E,[Object(s["f"])("div",I,[Q.added_tags.tags.isEmpty?Object(s["d"])("",!0):(Object(s["v"])(),Object(s["e"])("div",A,[J,(Object(s["v"])(!0),Object(s["e"])(s["a"],null,Object(s["C"])(Q.added_tags.tags,(function(e){return Object(s["v"])(),Object(s["e"])("span",{class:"badge bg-success text-white",key:e,style:{margin:"0.1em"}},Object(s["G"])(e.tagName),1)})),128))])),B,(Object(s["v"])(!0),Object(s["e"])(s["a"],null,Object(s["C"])(Q.tags,(function(e){return Object(s["v"])(),Object(s["e"])("button",{onClick:function(t){return V.addTagToUser({tagName:e.tagName,categoryName:""})},type:"button",class:"btn btn-success",key:e,style:{margin:"0.1em"}},Object(s["G"])(e.tagName),9,L)})),128)),Object(s["h"])(Z,{name:"tags",class:"error-feedback"})])]),W,(Object(s["v"])(!0),Object(s["e"])(s["a"],null,Object(s["C"])(Q.projects,(function(e){return Object(s["v"])(),Object(s["e"])("div",{class:"card text-center",style:{margin:"1em"},key:e.id},[Object(s["f"])("div",R,[Object(s["f"])("h5",$,Object(s["G"])(e.name),1),Object(s["f"])("p",K,Object(s["G"])(e.description),1),Object(s["f"])("p",Y,[Object(s["f"])("em",null,Object(s["G"])(Q.connections[e.id]),1)])]),0!==e.tagNameList.length?(Object(s["v"])(),Object(s["e"])("div",q,[(Object(s["v"])(!0),Object(s["e"])(s["a"],null,Object(s["C"])(e.tagNameList,(function(e){return Object(s["v"])(),Object(s["e"])("span",{class:"badge bg-success",key:e,style:{margin:"0.1em"}},Object(s["G"])(e),1)})),128))])):Object(s["d"])("",!0),Object(s["f"])("div",z," Дедлайн: "+Object(s["G"])(V.formatDate(e.end_date)),1)])})),128))])])])])]})),_:1},8,["onSubmit","validation-schema"])])}a("d3b7"),a("25f0"),a("159b");var Q=a("7bb1"),V=a("506a"),X=a("d4ec"),Z=a("bee2"),ee=a("7424"),te=function(){function e(){Object(X["a"])(this,e)}return Object(Z["a"])(e,[{key:"getUserInfo",value:function(){return ee["a"].get("/user/info")}},{key:"addUserInfo",value:function(e){var t=e.name,a=e.surname,s=e.birthDate,n=e.description;return ee["a"].post("/user/add",{name:t,surname:a,birthDate:s,description:n})}}]),e}(),ae=new te,se=a("30ef"),ne=a("df33"),ce=a("0098"),re={name:"Profile",components:{Form:Q["c"],Field:Q["b"],ErrorMessage:Q["a"]},data:function(){var e=V["b"]().shape({name:V["c"](),surname:V["c"](),birthDate:V["a"](),description:V["c"]()});return{tags:null,connections:[],added_tags:{tags:[]},info:null,content:null,message:null,projects:null,loading:!1,schema:e,months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){var e=this;this.currentUser||this.$router.push("/login"),ne["a"].getProfileProjects().then((function(t){e.projects=t.data.projectListResponseDto.projects,e.connections=t.data.connections}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();"Error: Projects not found"===a?ce["a"].getCategories().then((function(t){e.tags=t.data,e.content=null})):e.content=a})),ae.getUserInfo().then((function(t){e.info=t.data}),(function(t){!t.response||403!==t.response.status&&401!==t.response.status||se["a"].dispatch("logout"),e.content=t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})),ce["a"].getUserTags().then((function(t){t.data.forEach((function(t){return e.added_tags.tags.push({tagName:t.tagName,categoryName:""})})),ce["a"].getCheckedTags(e.added_tags).then((function(t){e.tags=t.data}))}),(function(t){!t.response||403!==t.response.status&&401!==t.response.status||se["a"].dispatch("logout");var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();"Error: Tags Not Found"===a?ce["a"].getCategories().then((function(t){e.tags=t.data,e.content=null})):e.content=a}))},methods:{formatDate:function(e){return new Date(e).toLocaleString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},getName:function(){return null==this.info||null==this.info.name?"Write your name":this.info.name},getSurname:function(){return null==this.info||null==this.info.surname?"Write your surname":this.info.surname},getBirthDate:function(){return null==this.info||null==this.info.birthDate?"Write your birth date":new Date(this.info.birthDate).getDate()+" "+this.months[new Date(this.info.birthDate).getMonth()]+" "+new Date(this.info.birthDate).getFullYear()},getDescription:function(){return null==this.info||null==this.info.description?"Write your description":this.info.description},addUserInfo:function(e){var t=this;ae.addUserInfo(e).then((function(e){t.info=e.data}),(function(e){t.content=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),!e.response||403!==e.response.status&&401!==e.response.status||se["a"].dispatch("logout")}))},addTagToUser:function(e){var t=this;ce["a"].addTagToUser(e).then((function(){t.added_tags.tags.push({tagName:e.tagName,categoryName:""}),ce["a"].getCheckedTags(t.added_tags).then((function(e){t.tags=e.data}))}),(function(e){t.content=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),!e.response||403!==e.response.status&&401!==e.response.status||se["a"].dispatch("logout")}))}}},oe=a("6b0d"),ie=a.n(oe);const le=ie()(re,[["render",H]]);t["default"]=le}}]);
//# sourceMappingURL=chunk-2d0d03d6.0a1308d1.js.map