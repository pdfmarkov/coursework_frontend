{"version":3,"sources":["webpack:///./src/components/Notifications.vue","webpack:///./src/components/Notifications.vue?7d9a"],"names":["class","role","style","content","checks","length","check","key","userProjectId","projectResponseDto","name","description","tagNameList","tagName","formatDate","endDate","username","userDescription","userTagNameList","userTagName","sendInvitation","id","data","computed","notifications","methods","d","Date","toLocaleString","weekday","year","month","day","invitation","then","getNotifications","error","response","message","toString","status","EventBus","dispatch","checkUserAsLeaderResponseDtoList","$store","state","socket","console","log","mounted","this","watch","handler","deep","__exports__","render"],"mappings":"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","file":"js/chunk-2d226767.1ea27849.js","sourcesContent":["<template>\r\n  <div class=\"alert alert-danger\" role=\"alert\" v-if=\"content != null\" style=\"margin: 1em\">\r\n    {{ content }}\r\n  </div>\r\n  <div class=\"alert alert-success\" role=\"alert\" v-if=\"checks.length !== 0\" style=\"margin: 1em\">\r\n    Всего проектов: {{ checks.length }}\r\n  </div>\r\n  <div>\r\n    <div class=\"card text-center\" style=\"margin: 1em\" v-for=\"check in checks\" :key=\"check.userProjectId\">\r\n      <div class=\"card-header\">\r\n        Ваш проект\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">{{ check.projectResponseDto.name }}</h5>\r\n        <p class=\"card-text\">{{ check.projectResponseDto.description }}</p>\r\n        <span class=\"badge bg-success text-white\" v-for=\"tagName in check.projectResponseDto.tagNameList\" :key=\"tagName\" style=\"margin: 0.1em\">\r\n        {{ tagName }}\r\n      </span>\r\n      </div>\r\n\r\n      <div class=\"card-header text-muted\">\r\n        Дедлайн: {{ formatDate(check.projectResponseDto.endDate) }}\r\n      </div>\r\n      <div class=\"card-footer text-muted\">\r\n        К вашему проекту хочет присоединится\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">{{ check.username }}</h5>\r\n        <p class=\"card-text\">{{ check.userDescription }}</p>\r\n        <span class=\"badge bg-success text-white\" v-for=\"userTagName in check.userTagNameList\" :key=\"userTagName\" style=\"margin: 0.1em\">\r\n          {{ userTagName }}\r\n        </span>\r\n      </div>\r\n      <div class=\"card-footer text-white\">\r\n        <a class=\"btn btn-success\" style=\"margin: 0.1em\" v-on:click=\"sendInvitation({ 'projectId' : check.projectResponseDto.id, 'userProjectId' : check.userProjectId, 'isAccepted': true, 'username': check.username })\">Подходит</a>\r\n        <a class=\"btn btn-danger\" style=\"margin: 0.1em\" v-on:click=\"sendInvitation({ 'projectId' : check.projectResponseDto.id, 'userProjectId' : check.userProjectId, 'isAccepted': false, 'username': check.username })\">Не подходит</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProjectService from \"../services/project.service\";\r\nimport EventBus from \"../common/EventBus\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Notifications\",\r\n  data() {\r\n    return {\r\n      checks: [],\r\n      content: \"Проверяем, есть ли новые уведомления...\",\r\n    };\r\n  },\r\n  computed:\r\n    mapGetters({\r\n      notifications: 'socket/getNotifications'\r\n    }),\r\n  methods: {\r\n    formatDate: d => new Date (d).toLocaleString('ru-RU', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }),\r\n    sendInvitation(invitation) {\r\n      ProjectService.sendInvitation(invitation).then(\r\n          () => {\r\n            // this.content = response.data;\r\n            this.getNotifications();\r\n          },\r\n          (error) => {\r\n            this.content =\r\n                (error.response &&\r\n                    error.response.data &&\r\n                    error.response.data.message) ||\r\n                error.message ||\r\n                error.toString();\r\n\r\n            if (error.response && (error.response.status === 403 || error.response.status === 401)) {\r\n              EventBus.dispatch(\"logout\");\r\n            }\r\n          }\r\n      );\r\n    },\r\n    getNotifications() {\r\n      ProjectService.getNotifications().then(\r\n          (response) => {\r\n            this.content = null;\r\n            this.checks = response.data.checkUserAsLeaderResponseDtoList;\r\n            this.$store.state.socket.notifications = response.data.checkUserAsLeaderResponseDtoList.length;\r\n            if (this.checks.length === 0) this.content = \"Новых уведомлений не приходило!\";\r\n          },\r\n          (error) => {\r\n            this.content =\r\n                (error.response &&\r\n                    error.response.data &&\r\n                    error.response.data.message) ||\r\n                error.message ||\r\n                error.toString();\r\n\r\n            if (error.response && error.response.status === 404 )\r\n              this.content = 'Запросов не найдено!'\r\n            console.log(error.response)\r\n\r\n            if (error.response && (error.response.status === 403 || error.response.status === 401\r\n               || error.response.data.message === \"class java.lang.String cannot be cast to class org.springframework.security.core.userdetails.UserDetails (java.lang.String is in module java.base of loader 'bootstrap'; org.springframework.security.core.userdetails.UserDetails is in unnamed module of loader 'app')\"))\r\n              EventBus.dispatch(\"logout\");\r\n          }\r\n      );\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getNotifications();\r\n  },\r\n  watch: {\r\n    notifications: {\r\n      handler: function () {\r\n        this.getNotifications()\r\n      },\r\n      deep:true\r\n    }\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Notifications.vue?vue&type=template&id=2d716106\"\nimport script from \"./Notifications.vue?vue&type=script&lang=js\"\nexport * from \"./Notifications.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"H:\\\\1\\\\ITMO\\\\3 Курс\\\\ИСБД\\\\kyrsovik\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}